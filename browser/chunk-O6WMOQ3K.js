import{a as F}from"./chunk-Y4GXL2JR.js";import{a as j}from"./chunk-YEF2QUZE.js";import{$ as c,A as h,Aa as $,H as r,J as k,K as y,O as d,R as m,S as b,T as R,U as n,V as i,W as p,X as O,Y as L,Z as P,_ as u,c as E,da as s,ea as w,fa as g,ga as V,ha as B,q as I,ra as T,sa as M,ta as S,x as _,y as x,z as f}from"./chunk-TNYZ2SDM.js";function A(t,l){if(t&1&&(n(0,"span",13),s(1),i()),t&2){let e=c();r(),w(e.selectedPokemon)}}function U(t,l){t&1&&(n(0,"span"),s(1,"Pokemon"),i())}function q(t,l){if(t&1&&(n(0,"p",14),s(1),i()),t&2){let e=c();r(),g(" ",e.getTotalResultsText()," ")}}function J(t,l){t&1&&(n(0,"div",15),p(1,"div",16),n(2,"p",17),s(3,"Searching for encounter locations..."),i()())}function K(t,l){if(t&1){let e=P();n(0,"div",18)(1,"div",19),f(),n(2,"svg",20),p(3,"path",21),i()(),h(),n(4,"h3",22),s(5,"Search Error"),i(),n(6,"p",23),s(7),i(),n(8,"button",24),u("click",function(){_(e);let o=c();return x(o.goBackToSearch())}),s(9," Try Another Search "),i()()}if(t&2){let e=c();r(7),w(e.errorMessage)}}function Q(t,l){if(t&1){let e=P();n(0,"div",18)(1,"div",25),f(),n(2,"svg",26),p(3,"path",27),i()(),h(),n(4,"h3",22),s(5,"No Encounters Found"),i(),n(6,"p",23)(7,"span",13),s(8),i(),s(9," doesn't appear to have any recorded wild encounter locations, or this Pokemon might only be available through special events or breeding. "),i(),n(10,"button",24),u("click",function(){_(e);let o=c();return x(o.goBackToSearch())}),s(11," Search Another Pokemon "),i()()}if(t&2){let e=c();r(8),w(e.selectedPokemon)}}function W(t,l){if(t&1&&(n(0,"div"),s(1),n(2,"span",13),s(3),i()()),t&2){let e=l.$implicit,a=c(5);r(),V(" Level ",e.min_level,"-",e.max_level," \u2022 "),r(2),w(a.formatMethodName(e.method.name))}}function X(t,l){if(t&1&&(n(0,"div",49),d(1,W,4,3,"div",43),i()),t&2){let e=c().$implicit;r(),m("ngForOf",e.encounter_details.slice(0,1))}}function Y(t,l){if(t&1&&(n(0,"div")(1,"div",45)(2,"span",46),s(3),i(),n(4,"span",47),s(5),i()(),d(6,X,2,1,"div",48),i()),t&2){let e=l.$implicit;r(3),g(" ",e.version.name," "),r(2),g(" ",e.max_chance,"% chance "),r(),m("ngIf",e.encounter_details.length>0)}}function Z(t,l){if(t&1&&(n(0,"div",50),s(1),i()),t&2){let e=c().$implicit;r(),g(" +",e.version_details.length-2," more versions ")}}function ee(t,l){if(t&1&&(n(0,"div",38)(1,"div",39)(2,"h3",40),s(3),i(),n(4,"span",41),s(5),i()(),n(6,"div",42),d(7,Y,7,3,"div",43)(8,Z,2,1,"div",44),i()()),t&2){let e=l.$implicit,a=l.index,o=c(2);r(3),g(" ",o.formatLocationName(e.location_area.name)," "),r(2),g(" #",o.getGlobalIndex(a)," "),r(2),m("ngForOf",e.version_details.slice(0,2)),r(),m("ngIf",e.version_details.length>2)}}function te(t,l){if(t&1&&(n(0,"span"),s(1),i()),t&2){let e=c(2).index,a=c(2);r(),w(a.getGlobalIndex(e))}}function ne(t,l){if(t&1&&(n(0,"div",59),s(1),i()),t&2){let e=c(2).$implicit,a=c(2);r(),g(" ",a.formatLocationName(e.location_area.name)," ")}}function ie(t,l){if(t&1&&(n(0,"div"),s(1),i()),t&2){let e=l.$implicit;r(),V(" ",e.min_level,"-",e.max_level," ")}}function ae(t,l){if(t&1&&(n(0,"div"),d(1,ie,2,2,"div",43),i()),t&2){let e=c().$implicit;r(),m("ngForOf",e.encounter_details.slice(0,1))}}function oe(t,l){if(t&1&&(n(0,"div",13),s(1),i()),t&2){let e=l.$implicit,a=c(5);r(),g(" ",a.formatMethodName(e.method.name)," ")}}function re(t,l){if(t&1&&(n(0,"div"),d(1,oe,2,1,"div",60),i()),t&2){let e=c().$implicit;r(),m("ngForOf",e.encounter_details.slice(0,1))}}function se(t,l){if(t&1&&(n(0,"tr",52)(1,"td",53),d(2,te,2,1,"span",5),i(),n(3,"td",54),d(4,ne,2,1,"div",55),i(),n(5,"td",56),s(6),i(),n(7,"td",54)(8,"span",57),s(9),i()(),n(10,"td",58),d(11,ae,2,1,"div",5),i(),n(12,"td",58),d(13,re,2,1,"div",5),i()()),t&2){let e=l.$implicit,a=l.index,o=c().index;b("border-t-2",a===0&&o>0)("border-gray-200",a===0&&o>0),r(2),m("ngIf",a===0),r(2),m("ngIf",a===0),r(2),g(" ",e.version.name," "),r(3),g(" ",e.max_chance,"% "),r(2),m("ngIf",e.encounter_details.length>0),r(2),m("ngIf",e.encounter_details.length>0)}}function le(t,l){if(t&1&&(O(0),d(1,se,14,10,"tr",51),L()),t&2){let e=l.$implicit,a=c(2);r(),m("ngForOf",e.version_details)("ngForTrackBy",a.trackByVersion)}}function ce(t,l){if(t&1&&(n(0,"div",28)(1,"div",29),d(2,ee,9,4,"div",30),i(),n(3,"div",31)(4,"div",32)(5,"table",33)(6,"thead",34)(7,"tr")(8,"th",35),s(9," # "),i(),n(10,"th",35),s(11," Location "),i(),n(12,"th",35),s(13," Game Version "),i(),n(14,"th",35),s(15," Max Chance "),i(),n(16,"th",35),s(17," Level Range "),i(),n(18,"th",35),s(19," Method "),i()()(),n(20,"tbody",36),d(21,le,2,2,"ng-container",37),i()()()()()),t&2){let e=c();r(2),m("ngForOf",e.paginatedEncounters)("ngForTrackBy",e.trackByLocation),r(19),m("ngForOf",e.paginatedEncounters)("ngForTrackBy",e.trackByLocation)}}var z=(()=>{class t{constructor(e,a){this.stateService=e,this.router=a,this.destroy$=new E,this.selectedPokemon="",this.encounters=[],this.paginatedEncounters=[],this.isLoading=!1,this.hasError=!1,this.errorMessage="",this.currentPage=1,this.itemsPerPage=10,this.totalItems=0}ngOnInit(){this.stateService.getState().pipe(I(this.destroy$)).subscribe(e=>{this.selectedPokemon=e.selectedPokemon||"",this.encounters=e.encounters,this.isLoading=e.isLoading,this.hasError=!!e.error,this.errorMessage=e.error||"",this.currentPage=e.pagination.currentPage,this.itemsPerPage=e.pagination.itemsPerPage,this.totalItems=e.pagination.totalItems,this.updatePaginatedResults()}),!this.selectedPokemon&&!this.isLoading&&this.router.navigate(["/search"])}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}updatePaginatedResults(){this.paginatedEncounters=this.stateService.getPaginatedEncounters()}goBackToSearch(){this.router.navigate(["/search"])}getTotalResultsText(){return this.totalItems===0?"No encounter locations found":this.totalItems===1?"1 encounter location found":`${this.totalItems} encounter locations found`}getGlobalIndex(e){return(this.currentPage-1)*this.itemsPerPage+e+1}formatLocationName(e){return e.replace(/-/g," ").replace(/\b\w/g,a=>a.toUpperCase())}formatMethodName(e){return e.replace(/-/g," ")}trackByLocation(e,a){return a.location_area.name}trackByVersion(e,a){return a.version.name}static{this.\u0275fac=function(a){return new(a||t)(k(F),k($))}}static{this.\u0275cmp=y({type:t,selectors:[["app-results"]],decls:18,vars:7,consts:[[1,"max-w-6xl","mx-auto"],[1,"mb-8","animate-fade-in"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","gap-4"],[1,"text-3xl","md:text-4xl","font-bold","text-gray-900","mb-2"],["class","capitalize",4,"ngIf"],[4,"ngIf"],["class","text-gray-600",4,"ngIf"],[1,"btn-secondary","flex","items-center","space-x-2","self-start","sm:self-auto",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],["class","text-center py-12 animate-fade-in",4,"ngIf"],["class","card p-8 text-center animate-fade-in",4,"ngIf"],["class","animate-fade-in",4,"ngIf"],[1,"capitalize"],[1,"text-gray-600"],[1,"text-center","py-12","animate-fade-in"],[1,"loading-spinner","w-12","h-12","text-pokemon-red","mx-auto","mb-4"],[1,"text-gray-600","text-lg"],[1,"card","p-8","text-center","animate-fade-in"],[1,"w-16","h-16","bg-red-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-xl","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600","mb-6"],[1,"btn-primary",3,"click"],[1,"w-16","h-16","bg-yellow-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-yellow-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"],[1,"animate-fade-in"],[1,"md:hidden","space-y-4"],["class","card p-4 hover:shadow-lg transition-shadow duration-300",4,"ngFor","ngForOf","ngForTrackBy"],[1,"hidden","md:block","card","overflow-hidden"],[1,"overflow-x-auto"],[1,"w-full"],[1,"bg-gray-50","border-b","border-gray-200"],[1,"px-6","py-4","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"card","p-4","hover:shadow-lg","transition-shadow","duration-300"],[1,"flex","justify-between","items-start","mb-3"],[1,"font-semibold","text-gray-900","capitalize"],[1,"text-sm","text-gray-500"],[1,"space-y-2"],[4,"ngFor","ngForOf"],["class","text-xs text-gray-400",4,"ngIf"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-700","capitalize"],[1,"text-sm","text-pokemon-red","font-semibold"],["class","text-xs text-gray-500",4,"ngIf"],[1,"text-xs","text-gray-500"],[1,"text-xs","text-gray-400"],["class","hover:bg-gray-50 transition-colors duration-150",3,"border-t-2","border-gray-200",4,"ngFor","ngForOf","ngForTrackBy"],[1,"hover:bg-gray-50","transition-colors","duration-150"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-500"],[1,"px-6","py-4","whitespace-nowrap"],["class","text-sm font-medium text-gray-900 capitalize",4,"ngIf"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900","capitalize"],[1,"text-sm","font-semibold","text-pokemon-red"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900"],[1,"text-sm","font-medium","text-gray-900","capitalize"],["class","capitalize",4,"ngFor","ngForOf"]],template:function(a,o){a&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),d(5,A,2,1,"span",4)(6,U,2,0,"span",5),s(7," Encounter Locations "),i(),d(8,q,2,1,"p",6),i(),n(9,"button",7),u("click",function(){return o.goBackToSearch()}),f(),n(10,"svg",8),p(11,"path",9),i(),h(),n(12,"span"),s(13,"New Search"),i()()()(),d(14,J,4,0,"div",10)(15,K,10,1,"div",11)(16,Q,12,1,"div",11)(17,ce,22,4,"div",12),i()),a&2&&(r(5),m("ngIf",o.selectedPokemon),r(),m("ngIf",!o.selectedPokemon),r(2),m("ngIf",!o.isLoading&&!o.hasError),r(6),m("ngIf",o.isLoading),r(),m("ngIf",o.hasError&&!o.isLoading),r(),m("ngIf",!o.isLoading&&!o.hasError&&o.encounters.length===0),r(),m("ngIf",!o.isLoading&&!o.hasError&&o.encounters.length>0))},dependencies:[S,T,M],encapsulation:2})}}return t})();function me(t,l){if(t&1){let e=P();n(0,"button",23),u("click",function(){let o=_(e).$implicit,v=c(2);return x(v.goToPage(o))}),s(1),i()}if(t&2){let e=l.$implicit,a=c(2);R(a.getPageButtonClasses(e)),r(),g(" ",e===-1?"...":e," ")}}function de(t,l){if(t&1){let e=P();n(0,"div",1)(1,"div",2),s(2),i(),n(3,"div",3)(4,"button",4),u("click",function(){_(e);let o=c();return x(o.goToPage(1))}),f(),n(5,"svg",5),p(6,"path",6),i()(),h(),n(7,"button",7),u("click",function(){_(e);let o=c();return x(o.goToPage(o.currentPage-1))}),f(),n(8,"svg",5),p(9,"path",8),i()(),h(),n(10,"div",9),d(11,me,2,3,"button",10),i(),n(12,"button",11),u("click",function(){_(e);let o=c();return x(o.goToPage(o.currentPage+1))}),f(),n(13,"svg",5),p(14,"path",12),i()(),h(),n(15,"button",13),u("click",function(){_(e);let o=c();return x(o.goToPage(o.totalPages))}),f(),n(16,"svg",5),p(17,"path",14),i()()(),h(),n(18,"div",15)(19,"label",16),s(20,"Show:"),i(),n(21,"select",17),u("change",function(o){_(e);let v=c();return x(v.changeItemsPerPage(o))}),n(22,"option",18),s(23,"5"),i(),n(24,"option",19),s(25,"10"),i(),n(26,"option",20),s(27,"20"),i(),n(28,"option",21),s(29,"50"),i()(),n(30,"span",22),s(31,"per page"),i()()()}if(t&2){let e=c();r(2),B(" Showing ",e.getStartItem(),"-",e.getEndItem()," of ",e.totalItems," results "),r(2),b("disabled",e.currentPage===1),m("disabled",e.currentPage===1),r(3),b("disabled",e.currentPage===1),m("disabled",e.currentPage===1),r(4),m("ngForOf",e.getVisiblePages())("ngForTrackBy",e.trackByPage),r(),b("disabled",e.currentPage===e.totalPages),m("disabled",e.currentPage===e.totalPages),r(3),b("disabled",e.currentPage===e.totalPages),m("disabled",e.currentPage===e.totalPages),r(6),m("value",e.itemsPerPage)}}var D=(()=>{class t{constructor(e){this.stateService=e,this.destroy$=new E,this.currentPage=1,this.itemsPerPage=10,this.totalItems=0,this.totalPages=0}ngOnInit(){this.stateService.getState().pipe(I(this.destroy$)).subscribe(e=>{this.currentPage=e.pagination.currentPage,this.itemsPerPage=e.pagination.itemsPerPage,this.totalItems=e.pagination.totalItems,this.totalPages=Math.ceil(this.totalItems/this.itemsPerPage)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}goToPage(e){e===-1||e<1||e>this.totalPages||e===this.currentPage||this.stateService.setPagination({currentPage:e})}changeItemsPerPage(e){let a=e.target,o=parseInt(a.value,10),v=(this.currentPage-1)*this.itemsPerPage+1,C=Math.ceil(v/o);this.stateService.setPagination({itemsPerPage:o,currentPage:Math.max(1,C)})}getVisiblePages(){let e=[];if(this.totalPages<=7)for(let o=1;o<=this.totalPages;o++)e.push(o);else{e.push(1);let o=Math.max(2,this.currentPage-2),v=Math.min(this.totalPages-1,this.currentPage+2);o>2&&e.push(-1);for(let C=o;C<=v;C++)e.push(C);v<this.totalPages-1&&e.push(-1),this.totalPages>1&&e.push(this.totalPages)}return e}getPageButtonClasses(e){return e===-1?"ellipsis":e===this.currentPage?"active":""}getStartItem(){return(this.currentPage-1)*this.itemsPerPage+1}getEndItem(){return Math.min(this.currentPage*this.itemsPerPage,this.totalItems)}trackByPage(e,a){return a}static{this.\u0275fac=function(a){return new(a||t)(k(F))}}static{this.\u0275cmp=y({type:t,selectors:[["app-paginator"]],decls:1,vars:1,consts:[["class","flex flex-col sm:flex-row items-center justify-between gap-4 mt-8 animate-fade-in",4,"ngIf"],[1,"flex","flex-col","sm:flex-row","items-center","justify-between","gap-4","mt-8","animate-fade-in"],[1,"text-sm","text-gray-600"],[1,"flex","items-center","space-x-2"],["title","First page",1,"pagination-btn",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 19l-7-7 7-7m8 14l-7-7 7-7"],["title","Previous page",1,"pagination-btn",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"flex","items-center","space-x-1"],["class","pagination-btn min-w-[40px]",3,"class","click",4,"ngFor","ngForOf","ngForTrackBy"],["title","Next page",1,"pagination-btn",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],["title","Last page",1,"pagination-btn",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 5l7 7-7 7M5 5l7 7-7 7"],[1,"flex","items-center","space-x-2","text-sm"],["for","itemsPerPage",1,"text-gray-600"],["id","itemsPerPage",1,"border","border-gray-300","rounded","px-2","py-1","text-sm","focus:ring-2","focus:ring-pokemon-blue","focus:border-transparent",3,"change","value"],["value","5"],["value","10"],["value","20"],["value","50"],[1,"text-gray-600"],[1,"pagination-btn","min-w-[40px]",3,"click"]],template:function(a,o){a&1&&d(0,de,32,18,"div",0),a&2&&m("ngIf",o.totalPages>1)},dependencies:[S,T,M],styles:[".pagination-btn[_ngcontent-%COMP%]{border-radius:.375rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));padding:.5rem .75rem;font-size:.875rem;line-height:1.25rem;font-weight:500;--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1));transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s}.pagination-btn[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.pagination-btn[_ngcontent-%COMP%]:focus{border-color:transparent;outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-opacity: 1;--tw-ring-color: rgb(0 117 190 / var(--tw-ring-opacity, 1)) }.pagination-btn.disabled[_ngcontent-%COMP%]{cursor:not-allowed;opacity:.5}.pagination-btn.disabled[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.pagination-btn.active[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(227 53 13 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(227 53 13 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.pagination-btn.active[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1))}.pagination-btn.ellipsis[_ngcontent-%COMP%]{cursor:default}.pagination-btn.ellipsis[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}"]})}}return t})();var we=(()=>{class t{static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275cmp=y({type:t,selectors:[["app-results-page"]],decls:8,vars:0,consts:[[1,"min-h-screen","bg-gray-50"],[1,"container","mx-auto","px-4","py-8"],[1,"fixed","inset-0","-z-10","overflow-hidden","pointer-events-none"],[1,"absolute","top-32","right-10","w-40","h-40","bg-pokemon-blue","bg-opacity-10","rounded-full","blur-xl"],[1,"absolute","bottom-32","left-16","w-56","h-56","bg-pokemon-red","bg-opacity-10","rounded-full","blur-xl"]],template:function(a,o){a&1&&(n(0,"div",0),p(1,"app-navigation"),n(2,"main",1),p(3,"app-results")(4,"app-paginator"),i(),n(5,"div",2),p(6,"div",3)(7,"div",4),i()())},dependencies:[S,j,z,D],encapsulation:2})}}return t})();export{we as ResultsPageComponent};
